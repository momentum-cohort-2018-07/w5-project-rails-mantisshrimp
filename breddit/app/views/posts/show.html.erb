<p id="notice"><%= notice %></p>

<h1>Posts</h1>

<p>
    <strong>Title</strong>
    <%= @post.title %>
</p>

<p>
    <strong>Created by</strong>
    <%= @post.user_id %>
</p>

<p>
    <strong>URL</strong>
    <%= @post.url %>
</p>

<p>
    <strong>Description</strong>
</p>

<% @post.comments.each do |comment| %>
    <p><%= User.find(comment.user_id).username %> at <%= comment.created_at %></p>
    <p><%= comment.comment_text %><p>
<% end %>

<% if current_user %>
    <%= link_to 'Edit', edit_post_path(@post) %> |
    <%= link_to 'Add Comment', new_comment_path({post_id: @post.id})  %> |

    <% if @vote %>
        vote found
        <%= link_to 'Vote +1', vote_path({id: @vote.id, vote: {vote_value: 5, user_id: current_user, post_id: @post.id}}), method: :patch  %> |
        <%= link_to 'Vote -1', vote_path({id: @vote.id, vote: {vote_value: -5, user_id: current_user, post_id: @post.id}}), method: :patch  %>
    <% else %>
        vote not found
        <%= link_to 'Vote +1', votes_path({vote: {vote_value: 1, user_id: current_user, post_id: @post.id}}), method: :post  %> |
        <%= link_to 'Vote -1', votes_path({vote: {vote_value: -1, user_id: current_user, post_id: @post.id}}), method: :post  %>
    <% end %>

<% end %>
<%= link_to 'Back', posts_path  %>


